<div class="container"
  <h2 class='text-center'> Resultados da sua pesquisa contendo <%="#{:search}"%></h2>

  <div class="medicines-offers">
    <% @meds.each do |med| %>
      <div class="card-meds">
        <%= cl_image_tag med.photo.url(:bright), class:"box" %>
        <h4><%= med.name %></h4>
        <div class="content">
          <p class="description"><%= med.description %></p>
        </div>
        <span class="align-name-mid-left">Doador: <%= link_to user_path(med.user), med.user.name%></span>
        <%= image_tag donator_picture(med), class:"avatar align-avatar-left"%>
        <p><%= link_to "Mais informações", med_path(med), {class:"btn-search align-btn-top-left"}%></p>
      </div>
    <% end %>
  </div>
</div>
<br>
<!-- added for geocoding -->

<div class="row">
  <div class="col-md-8 col-md-offset-2">
    <div id="map" style="width: 100%; height: 600px;">
      <% content_for(:after_js) do %>
        <%= javascript_tag do %>
          $(document).ready(function() {
            var handler = Gmaps.build('Google');
            handler.buildMap({ internal: { id: 'map' } }, function() {
              markers = handler.addMarkers(<%= raw @hash.to_json %>);
              handler.bounds.extendWith(markers);
              handler.fitMapToBounds();
              if (markers.length == 0) {
                handler.getMap().setZoom(2);
              } else if (markers.length == 1) {
                handler.getMap().setZoom(14);
              }
            });
          });
        <% end %>
      <% end %>
    </div>
  </div>
</div>
